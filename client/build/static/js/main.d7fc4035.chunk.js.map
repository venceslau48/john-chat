{"version":3,"sources":["components/Chat/Chat.js","components/Join.js","components/Chat/Users.js","components/Chat/Sidebar.js","components/Chat/Message.js","components/Chat/Messages.js","components/Chat/Compose.js","App.js","index.js"],"names":["socket","Join","useState","name","setName","room","setRoom","className","type","value","onChange","e","target","placeholder","required","to","onClick","preventDefault","Users","users","map","user","key","Sidebar","Message","message","text","createdAt","isSentByCurrentUser","trimmedName","trim","toLowerCase","Messages","messages","i","Compose","setMessage","sendMessage","id","onKeyPress","Chat","location","setCreatedAt","setMessages","setUsers","ENDPOINT","useEffect","queryString","parse","search","io","emit","error","alert","href","on","moment","Date","now","format","App","exact","path","component","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.d7fc4035.chunk.js","sourcesContent":["import React, { useState, useEffect } from \"react\"\r\nimport queryString from \"query-string\"\r\nimport io from \"socket.io-client\"\r\nimport moment from \"moment\"\r\nimport Sidebar from \"./Sidebar\"\r\nimport Messages from \"./Messages\"\r\nimport Compose from \"./Compose\"\r\n\r\nlet socket\r\n\r\nconst Chat = ({ location }) => {\r\n    const [name, setName] = useState(\"\")\r\n    const [room, setRoom] = useState(\"\")\r\n    const [createdAt, setCreatedAt] = useState(\"\")\r\n    const [message, setMessage] = useState(\"\")\r\n    const [messages, setMessages] = useState([])\r\n    const [users, setUsers] = useState(\"\")\r\n    const ENDPOINT = \"https://john-chat.herokuapp.com/\"\r\n\r\n    useEffect(() => {\r\n        const { name, room } = queryString.parse(location.search)\r\n\r\n        socket = io(ENDPOINT)\r\n\r\n        setRoom(room)\r\n        setName(name)\r\n\r\n        socket.emit(\"join\", { name, room }, error => {\r\n            if (error) {\r\n                alert(error)\r\n                location.href = \"/\"\r\n            }\r\n        })\r\n    }, [ENDPOINT, location.search])\r\n\r\n    useEffect(() => {\r\n        socket.on(\"message\", message => {\r\n            setMessages(messages => [...messages, message])\r\n            setCreatedAt(moment(Date.now()).format(\"HH:mm\"))\r\n        })\r\n\r\n        socket.on(\"roomData\", ({ users }) => {\r\n            setUsers(users)\r\n        })\r\n    }, [])\r\n\r\n    const sendMessage = e => {\r\n        e.preventDefault()\r\n\r\n        if (message) {\r\n            socket.emit(\"sendMessage\", message, () => setMessage(\"\"))\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"page-chat\">\r\n            <div className=\"chat\">\r\n                <Sidebar users={users} room={room} />\r\n                <div className=\"chat__main\">\r\n                    <Messages messages={messages} name={name} createdAt={createdAt} />\r\n                    <Compose message={message} setMessage={setMessage} sendMessage={sendMessage} />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Chat\r\n","import React, { useState } from \"react\"\r\nimport { Link } from \"react-router-dom\"\r\n\r\nconst Join = () => {\r\n    const [name, setName] = useState(\"\")\r\n    const [room, setRoom] = useState(\"\")\r\n\r\n    const join = e => {\r\n        if (!name || !room) {\r\n            e.preventDefault()\r\n        }\r\n\r\n        return null\r\n    }\r\n\r\n    return (\r\n        <div className=\"page-login\">\r\n            <div className=\"login\">\r\n                <h1 className=\"login__title\">Chat App</h1>\r\n                <form className=\"login__form\">\r\n                    <label className=\"login__label\">Display name</label>\r\n                    <input\r\n                        className=\"login__input\"\r\n                        type=\"text\"\r\n                        value={name}\r\n                        onChange={e => setName(e.target.value)}\r\n                        placeholder=\"Display name\"\r\n                        required\r\n                    />\r\n                    <label className=\"login__label\">Room</label>\r\n                    <input\r\n                        className=\"login__input\"\r\n                        type=\"text\"\r\n                        value={room}\r\n                        onChange={e => setRoom(e.target.value)}\r\n                        placeholder=\"Room\"\r\n                        required\r\n                    />\r\n                    <Link to={`/chat?name=${name}&room=${room}`} onClick={join}>\r\n                        <button className=\"login__button btn\">Join</button>\r\n                    </Link>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Join\r\n","import React from \"react\"\r\n\r\nconst Users = ({ users }) => {\r\n    return <ul className=\"room__users\">{users ? users.map(user => <li key={user.name}>{user.name}</li>) : null}</ul>\r\n}\r\n\r\nexport default Users\r\n","import React from \"react\"\r\nimport Users from \"./Users\"\r\n\r\nconst Sidebar = ({ room, users }) => {\r\n    return (\r\n        <div className=\"chat__sidebar\">\r\n            <div className=\"room\">\r\n                <h2 className=\"room__title\">{room}</h2>\r\n                <h3 className=\"room__users-title\">Users list</h3>\r\n                <Users users={users} />\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Sidebar\r\n","import React from \"react\"\r\n\r\nconst Message = ({ message: { text, user }, name, createdAt }) => {\r\n    let isSentByCurrentUser = false\r\n\r\n    const trimmedName = name.trim().toLowerCase()\r\n\r\n    if (user === trimmedName) {\r\n        isSentByCurrentUser = true\r\n    }\r\n\r\n    return isSentByCurrentUser ? (\r\n        <div className=\"message\">\r\n            <p>\r\n                <span className=\"message__name\">{trimmedName}</span>\r\n                <span className=\"message__date\">{createdAt}</span>\r\n            </p>\r\n            <p>{text}</p>\r\n        </div>\r\n    ) : (\r\n        <div className=\"message\">\r\n            <p>\r\n                <span className=\"message__name\">{user}</span>\r\n                <span className=\"message__date\">{createdAt}</span>\r\n            </p>\r\n            <p>{text}</p>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Message\r\n","import React from \"react\"\r\nimport ScrollToBottom from \"react-scroll-to-bottom\"\r\nimport Message from \"./Message\"\r\n\r\nconst Messages = ({ messages, name, createdAt }) => {\r\n    return (\r\n        <ScrollToBottom className=\"chat__messages\">\r\n            {messages.map((message, i) => (\r\n                <div key={i}>\r\n                    <Message message={message} name={name} createdAt={createdAt} />\r\n                </div>\r\n            ))}\r\n        </ScrollToBottom>\r\n    )\r\n}\r\n\r\nexport default Messages\r\n","import React from \"react\"\r\n\r\nconst Compose = ({ setMessage, sendMessage, message }) => {\r\n    return (\r\n        <div className=\"send-form\">\r\n            <form id=\"message-form\" className=\"send-form__form\">\r\n                <input\r\n                    className=\"send-form__input\"\r\n                    type=\"text\"\r\n                    name=\"message\"\r\n                    placeholder=\"Insert your message\"\r\n                    required\r\n                    value={message}\r\n                    onChange={({ target: { value } }) => setMessage(value)}\r\n                    onKeyPress={e => (e.key === \"Enter\" ? sendMessage(e) : null)}\r\n                    // autocomplete=\"off\"\r\n                />\r\n                <button className=\"send-form__button btn\" onClick={e => sendMessage(e)}>\r\n                    Send\r\n                </button>\r\n            </form>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Compose\r\n","import React from \"react\"\nimport { BrowserRouter as Router, Route } from \"react-router-dom\"\nimport \"./sass/main.scss\"\nimport Join from \"./components/Join\"\nimport Chat from \"./components/Chat/Chat\"\n\nconst App = () => {\n    return (\n        <Router>\n            <Route exact path=\"/\" component={Join} />\n            <Route path=\"/chat\" component={Chat} />\n        </Router>\n    )\n}\n\nexport default App\n","import React from \"react\"\nimport ReactDOM from \"react-dom\"\nimport App from \"./App\"\n\nReactDOM.render(<App />, document.getElementById(\"root\"))\n"],"sourceRoot":""}
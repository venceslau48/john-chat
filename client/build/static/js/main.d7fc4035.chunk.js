(this["webpackJsonpchat-app"]=this["webpackJsonpchat-app"]||[]).push([[0],{111:function(e,a){},157:function(e,a,t){"use strict";t.r(a);var n,s=t(0),c=t.n(s),r=t(59),m=t.n(r),l=t(19),o=t(1),u=(t(71),t(7)),i=function(){var e=Object(s.useState)(""),a=Object(u.a)(e,2),t=a[0],n=a[1],r=Object(s.useState)(""),m=Object(u.a)(r,2),o=m[0],i=m[1];return c.a.createElement("div",{className:"page-login"},c.a.createElement("div",{className:"login"},c.a.createElement("h1",{className:"login__title"},"Chat App"),c.a.createElement("form",{className:"login__form"},c.a.createElement("label",{className:"login__label"},"Display name"),c.a.createElement("input",{className:"login__input",type:"text",value:t,onChange:function(e){return n(e.target.value)},placeholder:"Display name",required:!0}),c.a.createElement("label",{className:"login__label"},"Room"),c.a.createElement("input",{className:"login__input",type:"text",value:o,onChange:function(e){return i(e.target.value)},placeholder:"Room",required:!0}),c.a.createElement(l.b,{to:"/chat?name=".concat(t,"&room=").concat(o),onClick:function(e){return t&&o||e.preventDefault(),null}},c.a.createElement("button",{className:"login__button btn"},"Join")))))},p=t(65),E=t(61),f=t.n(E),g=t(62),_=t.n(g),d=t(63),b=t.n(d),h=function(e){var a=e.users;return c.a.createElement("ul",{className:"room__users"},a?a.map((function(e){return c.a.createElement("li",{key:e.name},e.name)})):null)},v=function(e){var a=e.room,t=e.users;return c.a.createElement("div",{className:"chat__sidebar"},c.a.createElement("div",{className:"room"},c.a.createElement("h2",{className:"room__title"},a),c.a.createElement("h3",{className:"room__users-title"},"Users list"),c.a.createElement(h,{users:t})))},N=t(64),j=t.n(N),O=function(e){var a=e.message,t=a.text,n=a.user,s=e.name,r=e.createdAt,m=!1,l=s.trim().toLowerCase();return n===l&&(m=!0),m?c.a.createElement("div",{className:"message"},c.a.createElement("p",null,c.a.createElement("span",{className:"message__name"},l),c.a.createElement("span",{className:"message__date"},r)),c.a.createElement("p",null,t)):c.a.createElement("div",{className:"message"},c.a.createElement("p",null,c.a.createElement("span",{className:"message__name"},n),c.a.createElement("span",{className:"message__date"},r)),c.a.createElement("p",null,t))},y=function(e){var a=e.messages,t=e.name,n=e.createdAt;return c.a.createElement(j.a,{className:"chat__messages"},a.map((function(e,a){return c.a.createElement("div",{key:a},c.a.createElement(O,{message:e,name:t,createdAt:n}))})))},S=function(e){var a=e.setMessage,t=e.sendMessage,n=e.message;return c.a.createElement("div",{className:"send-form"},c.a.createElement("form",{id:"message-form",className:"send-form__form"},c.a.createElement("input",{className:"send-form__input",type:"text",name:"message",placeholder:"Insert your message",required:!0,value:n,onChange:function(e){var t=e.target.value;return a(t)},onKeyPress:function(e){return"Enter"===e.key?t(e):null}}),c.a.createElement("button",{className:"send-form__button btn",onClick:function(e){return t(e)}},"Send")))},k=function(e){var a=e.location,t=Object(s.useState)(""),r=Object(u.a)(t,2),m=r[0],l=r[1],o=Object(s.useState)(""),i=Object(u.a)(o,2),E=i[0],g=i[1],d=Object(s.useState)(""),h=Object(u.a)(d,2),N=h[0],j=h[1],O=Object(s.useState)(""),k=Object(u.a)(O,2),C=k[0],x=k[1],D=Object(s.useState)([]),A=Object(u.a)(D,2),M=A[0],w=A[1],q=Object(s.useState)(""),J=Object(u.a)(q,2),H=J[0],I=J[1],R="https://john-chat.herokuapp.com/";Object(s.useEffect)((function(){var e=f.a.parse(a.search),t=e.name,s=e.room;n=_()(R),g(s),l(t),n.emit("join",{name:t,room:s},(function(e){e&&(alert(e),a.href="/")}))}),[R,a.search]),Object(s.useEffect)((function(){n.on("message",(function(e){w((function(a){return[].concat(Object(p.a)(a),[e])})),j(b()(Date.now()).format("HH:mm"))})),n.on("roomData",(function(e){var a=e.users;I(a)}))}),[]);return c.a.createElement("div",{className:"page-chat"},c.a.createElement("div",{className:"chat"},c.a.createElement(v,{users:H,room:E}),c.a.createElement("div",{className:"chat__main"},c.a.createElement(y,{messages:M,name:m,createdAt:N}),c.a.createElement(S,{message:C,setMessage:x,sendMessage:function(e){e.preventDefault(),C&&n.emit("sendMessage",C,(function(){return x("")}))}}))))},C=function(){return c.a.createElement(l.a,null,c.a.createElement(o.a,{exact:!0,path:"/",component:i}),c.a.createElement(o.a,{path:"/chat",component:k}))};m.a.render(c.a.createElement(C,null),document.getElementById("root"))},66:function(e,a,t){e.exports=t(157)},71:function(e,a,t){}},[[66,1,2]]]);
//# sourceMappingURL=main.d7fc4035.chunk.js.map